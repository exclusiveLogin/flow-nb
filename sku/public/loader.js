!function(t){function e(r){if(a[r])return a[r].exports;var l=a[r]={i:r,l:!1,exports:{}};return t[r].call(l.exports,l,l.exports,e),l.l=!0,l.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="public/",e(e.s=15)}({15:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var l=a(6),n=r(l),o=a(5),i=r(o);window.ls=new n.default,window.FC=i.default},5:function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),n=function(){function t(e,a,l,n,o,i){if(r(this,t),!e)throw new Error("Нет входных данных Причала");if(this.data_p=e,!a)throw new Error("Нет входных данных Нефтебазы");if(this.data_nb=a,!l)throw new Error("Нет Дельта-сигма интегратора для потока причала");if(this.integrator_p=l,!n)throw new Error("Нет Дельта-сигма интегратора для потока нефтебазы");this.integrator_nb=n,i&&(this.callbackFunc=i),console.log("FlowCalc создан")}return l(t,[{key:"setDataStream",value:function(t,e){t?this.data_p=t:console.log("Нет входных данных Причала"),e?this.data_nb=e:console.log("Нет входных данных Нефтебазы")}},{key:"calcFlow",value:function(t,e,a){if((this.data_p||t)&&(this.data_nb||e)&&(this.prevMaxP=!1,this.prevMaxNB=!1,t&&(this.data_p=t),e&&(this.data_nb=e),a&&(this.callbackFunc=a),this.data_p&&this.data_nb)){var r=this.data_p.map(function(t,e){var a=this.integrator_p.Integrity(t.value);if(e>this.integrator_p.Buffer.length-1&&this.checkMaxP(a))return this.data_p[e-1]},this),l=this.data_nb.map(function(t,e){var a=this.integrator_nb.Integrity(t.value);if(e>this.integrator_nb.Buffer.length-1&&this.checkMaxNB(a))return this.data_nb[e-1]},this),n=[],o=[];for(var i in r)void 0!=r[i]&&n.push(r[i]);for(var s in l)void 0!=l[s]&&o.push(l[s]);var u=[],c=[];for(var f in n)u[n[f].utc]=n[f].value;for(var g in o)c[o[g].utc]=o[g].value;this.callbackFunc&&this.callbackFunc();return this.checkAnswerPoints(u,c)}}},{key:"checkMaxP",value:function(t){if(this.prevMaxP){var e=Math.abs(t);if(e>this.prevMaxP&&this.downlockP&&(this.downlockP=!1),e<this.prevMaxP&&!this.downlockP)return this.prevMaxP=e,this.downlockP=!0,!0}else this.prevMaxP=Math.abs(t);return!1}},{key:"checkMaxNB",value:function(t){if(this.prevMaxNB){var e=Math.abs(t);if(e>this.prevMaxNB&&this.downlockNB&&(this.downlockNB=!1),e<this.prevMaxNB&&!this.downlockNB)return this.prevMaxNB=e,this.downlockNB=!0,!0}else this.prevMaxNB=Math.abs(t);return!1}},{key:"checkAnswerPoints",value:function(t,e){if(t&&e){var a=[];for(var r in t)for(var l in e)l-r>0&&l-r<2e3&&a.push(r);for(var n in e)for(var o in t)o-n>0&&o-n<2e3&&a.push(n);return a}}},{key:"setCallback",value:function(t){this.callbackFunc=t||null}}]),t}();e.default=n},6:function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}(),n=function(){function t(){r(this,t)}return l(t,[{key:"saveSettings",value:function(t){Object.keys(t).map(function(e,a){window.localStorage?(localStorage.setItem(e,t[e]),console.log("idx-"+a+":"+e+":"+t[e]+" is saved")):showSysMsg("Ваш браузер не поддерживает сохранение настроек")})}},{key:"loadSettings",value:function(){if(Global.INTSettings={},Global.RTSettings={},null!=localStorage.getItem("RTVertRange")){var t=JSON.parse(localStorage.getItem("RTVertRange"));$("#rt_vertRange").val(t),$("#rt_vertRange_slider").slider({value:t}),Global.RTSettings.vertRange=t}if(null!=localStorage.getItem("RTbuffer")){var t=JSON.parse(localStorage.getItem("RTbuffer"));$("#rt_buffer").val(t),$("#rt_buffer_slider").slider({value:t}),Global.RTSettings.buffer=t}if(null!=localStorage.getItem("ampFilterNB")){var t=JSON.parse(localStorage.getItem("ampFilterNB"));$("#int_ampfilter_nb").val(t),$("#int_ampfilter_slider_nb").slider({value:t}),Global.INTSettings.ampFilterNB=t}if(null!=localStorage.getItem("ampFilterP")){var t=JSON.parse(localStorage.getItem("ampFilterP"));$("#int_ampfilter_p").val(t),$("#int_ampfilter_slider_p").slider({value:t}),Global.INTSettings.ampFilterP=t}if(null!=localStorage.getItem("ampNB")){var t=JSON.parse(localStorage.getItem("ampNB"));$("#int_ampliffer_nb").val(t),$("#int_amp_slider_nb").slider({value:t}),Global.INTSettings.ampNB=t}if(null!=localStorage.getItem("ampP")){var t=JSON.parse(localStorage.getItem("ampP"));$("#int_ampliffer_p").val(t),$("#int_amp_slider_p").slider({value:t}),Global.INTSettings.ampP=t}if(null!=localStorage.getItem("post")){var t=JSON.parse(localStorage.getItem("post"));$("#int_postbuffer").val(t),$("#int_post_slider").slider({value:t}),Global.INTSettings.post=t}if(null!=localStorage.getItem("pre")){var t=JSON.parse(localStorage.getItem("pre"));$("#int_prebuffer").val(t),$("#int_pre_slider").slider({value:t}),Global.INTSettings.pre=t}if(null!=localStorage.getItem("tube1t")){var t=JSON.parse(localStorage.getItem("tube1t"));t?($(".btn_rt1_t").addClass("active"),$(".btn_rt1_t").addClass("btn-danger"),$("#rt_trend1").show(500,function(){Global.Trend1.reflow()})):($(".btn_rt1_t").removeClass("active"),$(".btn_rt1_t").removeClass("btn-danger"),$("#rt_trend1").hide(0)),Global.tube1T=t}if(null!=localStorage.getItem("tube2t")){var t=JSON.parse(localStorage.getItem("tube2t"));t?($(".btn_rt2_t").addClass("active"),$(".btn_rt2_t").addClass("btn-danger"),$("#rt_trend2").show(500,function(){Global.Trend2.reflow()})):($(".btn_rt2_t").removeClass("active"),$(".btn_rt2_t").removeClass("btn-danger"),$("#rt_trend2").hide(0)),Global.tube2T=t}if(null!=localStorage.getItem("tube3t")){var t=JSON.parse(localStorage.getItem("tube3t"));t?($(".btn_rt3_t").addClass("active"),$(".btn_rt3_t").addClass("btn-danger"),$("#rt_trend3").show(500,function(){Global.Trend3.reflow()})):($(".btn_rt3_t").removeClass("active"),$(".btn_rt3_t").removeClass("btn-danger"),$("#rt_trend3").hide(0)),Global.tube3T=t}if(null!=localStorage.getItem("tube4t")){var t=JSON.parse(localStorage.getItem("tube4t"));t?($(".btn_rt4_t").addClass("active"),$(".btn_rt4_t").addClass("btn-danger"),$("#rt_trend4").show(500,function(){Global.Trend4.reflow()})):($(".btn_rt4_t").removeClass("active"),$(".btn_rt4_t").removeClass("btn-danger"),$("#rt_trend4").hide(0)),Global.tube4T=t}if(null!=localStorage.getItem("INTTONLYBtn")){var t=JSON.parse(localStorage.getItem("INTTONLYBtn"));Global.IntToggleOnly=t,intToggleOnly()}if(null!=localStorage.getItem("INTARJBtn")){var t=JSON.parse(localStorage.getItem("INTARJBtn"));Global.IntARJT=t,intArjToggle()}if(null!=localStorage.getItem("INTRTTBtn")){var t=JSON.parse(localStorage.getItem("INTRTTBtn"));Global.IntRTT=t,intRTTToggle()}Global.RTSettings.buffer&&Global.RTSettings.vertRange&&saveRTSettings(),Global.INTSettings.pre&&Global.INTSettings.post&&Global.INTSettings.ampNB&&Global.INTSettings.ampP&&Global.INTSettings.ampFilterNB&&Global.INTSettings.ampFilterP&&saveIntSettings()}}]),t}();e.default=n}});
//# sourceMappingURL=loader.js.map