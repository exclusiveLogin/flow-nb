!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="public/",e(e.s=15)}({15:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=a(6),i=n(r),l=a(5),s=n(l);window.ls=new i.default,window.FC=s.default},5:function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=function(){function t(e,a,r,i,l,s){if(n(this,t),!e)throw new Error("Нет входных данных Причала");if(this.data_p=e,!a)throw new Error("Нет входных данных Нефтебазы");if(this.data_nb=a,!r)throw new Error("Нет Дельта-сигма интегратора для потока причала");if(this.integrator_p=r,!i)throw new Error("Нет Дельта-сигма интегратора для потока нефтебазы");if(this.integrator_nb=i,!l)throw new Error("Нет подключения для выходного контейнера");this.viewContainerId=l,this.viewContainer=$(l),this.btn=this.viewContainer.find("#btn_calc_auto"),this.console_p=this.viewContainer.find(".streamlog .p"),this.console_nb=this.viewContainer.find(".streamlog .nb"),this.container_p=this.viewContainer.find(".streamcontainer .p"),this.container_nb=this.viewContainer.find(".streamcontainer .nb"),this.viewData={},this.viewData.p={},this.viewData.nb={},this.viewData.p.calc_cur_step=this.container_p.find(".calc_cur_step"),this.viewData.p.calc_cur_maxval=this.container_p.find(".calc_cur_maxval"),this.viewData.p.calc_cur_utc=this.container_p.find(".calc_cur_utc"),this.viewData.p.calc_peaks=this.container_p.find(".calc_peaks"),this.viewData.p.calc_answer_peaks=this.container_p.find(".calc_answer_peaks"),this.viewData.p.calc_all_steps=this.container_p.find(".calc_all_steps"),this.viewData.p.calc_est_steps=this.container_p.find(".calc_est_steps"),this.viewData.p.calc_idx=this.container_p.find(".calc_idx"),this.viewData.p.calc_cur_delta=this.container_p.find(".calc_cur_delta"),this.viewData.p.calc_tune=this.container_p.find(".calc_tune"),this.viewData.nb.calc_cur_step=this.container_nb.find(".calc_cur_step"),this.viewData.nb.calc_cur_maxval=this.container_nb.find(".calc_cur_maxval"),this.viewData.nb.calc_cur_utc=this.container_nb.find(".calc_cur_utc"),this.viewData.nb.calc_peaks=this.container_nb.find(".calc_peaks"),this.viewData.nb.calc_answer_peaks=this.container_nb.find(".calc_answer_peaks"),this.viewData.nb.calc_all_steps=this.container_nb.find(".calc_all_steps"),this.viewData.nb.calc_est_steps=this.container_nb.find(".calc_est_steps"),this.viewData.nb.calc_idx=this.container_nb.find(".calc_idx"),this.viewData.nb.calc_cur_delta=this.container_nb.find(".calc_cur_delta"),this.viewData.nb.calc_tune=this.container_nb.find(".calc_tune"),s&&(this.callbackFunc=s),console.log("FlowCalc создан")}return r(t,[{key:"setDataStream",value:function(t,e){t?this.data_p=t:console.log("Нет входных данных Причала"),e?this.data_nb=e:console.log("Нет входных данных Нефтебазы")}},{key:"calcFlow",value:function(t,e,a){if((this.data_p||t)&&(this.data_nb||e)&&(this.prevMaxP=!1,this.prevMaxNB=!1,t&&(this.data_p=t),e&&(this.data_nb=e),a&&(this.callbackFunc=a),this.data_p&&this.data_nb)){var n=this.data_p.map(function(t,e){var a=this.integrator_p.Integrity(t.value);if(e>this.integrator_p.Buffer.length-1&&this.checkMaxP(a))return this.data_p[e-1]},this),r=this.data_nb.map(function(t,e){var a=this.integrator_nb.Integrity(t.value);if(e>this.integrator_nb.Buffer.length-1&&this.checkMaxNB(a))return this.data_nb[e-1]},this),i=[],l=[];for(var s in n)void 0!=n[s]&&i.push(n[s]);for(var o in r)void 0!=r[o]&&l.push(r[o]);var c=[],_=[];for(var u in i)c[i[u].utc]=i[u].value;for(var f in l)_[l[f].utc]=l[f].value;this.callbackFunc&&this.callbackFunc();return this.checkAnswerPoints(c,_)}}},{key:"checkMaxP",value:function(t){if(this.prevMaxP){var e=Math.abs(t);if(e>this.prevMaxP&&this.downlockP&&(this.downlockP=!1),e<this.prevMaxP&&!this.downlockP)return this.prevMaxP=e,this.downlockP=!0,!0}else this.prevMaxP=Math.abs(t);return!1}},{key:"checkMaxNB",value:function(t){if(this.prevMaxNB){var e=Math.abs(t);if(e>this.prevMaxNB&&this.downlockNB&&(this.downlockNB=!1),e<this.prevMaxNB&&!this.downlockNB)return this.prevMaxNB=e,this.downlockNB=!0,!0}else this.prevMaxNB=Math.abs(t);return!1}},{key:"checkAnswerPoints",value:function(t,e){if(t&&e){var a=[];for(var n in t)for(var r in e)r-n>0&&r-n<2e3&&a.push(n);for(var i in e)for(var l in t)l-i>0&&l-i<2e3&&a.push(i);return a}}},{key:"setCallback",value:function(t){this.callbackFunc=t||null}}]),t}();e.default=i},6:function(t,e,a){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),i=function(){function t(){n(this,t)}return r(t,[{key:"saveSettings",value:function(t){Object.keys(t).map(function(e,a){window.localStorage?(localStorage.setItem(e,t[e]),console.log("idx-"+a+":"+e+":"+t[e]+" is saved")):showSysMsg("Ваш браузер не поддерживает сохранение настроек")})}},{key:"loadSettings",value:function(){if(Global.INTSettings={},Global.RTSettings={},null!=localStorage.getItem("RTVertRange")){var t=JSON.parse(localStorage.getItem("RTVertRange"));$("#rt_vertRange").val(t),$("#rt_vertRange_slider").slider({value:t}),Global.RTSettings.vertRange=t}if(null!=localStorage.getItem("RTbuffer")){var t=JSON.parse(localStorage.getItem("RTbuffer"));$("#rt_buffer").val(t),$("#rt_buffer_slider").slider({value:t}),Global.RTSettings.buffer=t}if(null!=localStorage.getItem("ampFilterNB")){var t=JSON.parse(localStorage.getItem("ampFilterNB"));$("#int_ampfilter_nb").val(t),$("#int_ampfilter_slider_nb").slider({value:t}),Global.INTSettings.ampFilterNB=t}if(null!=localStorage.getItem("ampFilterP")){var t=JSON.parse(localStorage.getItem("ampFilterP"));$("#int_ampfilter_p").val(t),$("#int_ampfilter_slider_p").slider({value:t}),Global.INTSettings.ampFilterP=t}if(null!=localStorage.getItem("ampNB")){var t=JSON.parse(localStorage.getItem("ampNB"));$("#int_ampliffer_nb").val(t),$("#int_amp_slider_nb").slider({value:t}),Global.INTSettings.ampNB=t}if(null!=localStorage.getItem("ampP")){var t=JSON.parse(localStorage.getItem("ampP"));$("#int_ampliffer_p").val(t),$("#int_amp_slider_p").slider({value:t}),Global.INTSettings.ampP=t}if(null!=localStorage.getItem("post")){var t=JSON.parse(localStorage.getItem("post"));$("#int_postbuffer").val(t),$("#int_post_slider").slider({value:t}),Global.INTSettings.post=t}if(null!=localStorage.getItem("pre")){var t=JSON.parse(localStorage.getItem("pre"));$("#int_prebuffer").val(t),$("#int_pre_slider").slider({value:t}),Global.INTSettings.pre=t}if(null!=localStorage.getItem("tube1t")){var t=JSON.parse(localStorage.getItem("tube1t"));t?($(".btn_rt1_t").addClass("active"),$(".btn_rt1_t").addClass("btn-danger"),$("#rt_trend1").show(500,function(){Global.Trend1.reflow()})):($(".btn_rt1_t").removeClass("active"),$(".btn_rt1_t").removeClass("btn-danger"),$("#rt_trend1").hide(0)),Global.tube1T=t}if(null!=localStorage.getItem("tube2t")){var t=JSON.parse(localStorage.getItem("tube2t"));t?($(".btn_rt2_t").addClass("active"),$(".btn_rt2_t").addClass("btn-danger"),$("#rt_trend2").show(500,function(){Global.Trend2.reflow()})):($(".btn_rt2_t").removeClass("active"),$(".btn_rt2_t").removeClass("btn-danger"),$("#rt_trend2").hide(0)),Global.tube2T=t}if(null!=localStorage.getItem("tube3t")){var t=JSON.parse(localStorage.getItem("tube3t"));t?($(".btn_rt3_t").addClass("active"),$(".btn_rt3_t").addClass("btn-danger"),$("#rt_trend3").show(500,function(){Global.Trend3.reflow()})):($(".btn_rt3_t").removeClass("active"),$(".btn_rt3_t").removeClass("btn-danger"),$("#rt_trend3").hide(0)),Global.tube3T=t}if(null!=localStorage.getItem("tube4t")){var t=JSON.parse(localStorage.getItem("tube4t"));t?($(".btn_rt4_t").addClass("active"),$(".btn_rt4_t").addClass("btn-danger"),$("#rt_trend4").show(500,function(){Global.Trend4.reflow()})):($(".btn_rt4_t").removeClass("active"),$(".btn_rt4_t").removeClass("btn-danger"),$("#rt_trend4").hide(0)),Global.tube4T=t}if(null!=localStorage.getItem("INTTONLYBtn")){var t=JSON.parse(localStorage.getItem("INTTONLYBtn"));Global.IntToggleOnly=t,intToggleOnly()}if(null!=localStorage.getItem("INTARJBtn")){var t=JSON.parse(localStorage.getItem("INTARJBtn"));Global.IntARJT=t,intArjToggle()}if(null!=localStorage.getItem("INTRTTBtn")){var t=JSON.parse(localStorage.getItem("INTRTTBtn"));Global.IntRTT=t,intRTTToggle()}Global.RTSettings.buffer&&Global.RTSettings.vertRange&&saveRTSettings(),Global.INTSettings.pre&&Global.INTSettings.post&&Global.INTSettings.ampNB&&Global.INTSettings.ampP&&Global.INTSettings.ampFilterNB&&Global.INTSettings.ampFilterP&&saveIntSettings()}}]),t}();e.default=i}});
//# sourceMappingURL=loader.js.map